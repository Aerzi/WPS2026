# AI演讲稿功能迭代优化方案

## 1. 背景与现状
结合 **用户负反馈数据 (2025.10-2026.01)** 与 **现有 PRD (2025.04)**，我们发现“AI演讲稿”功能在上线后，虽然解决了基础的文本生成需求，但在**多模态内容（图片/表格/图表）**的理解上存在显著短板，直接导致了用户感知的“人机感”和“内容太水”。

### 1.1 核心痛点（用户原声）
*   **图片无法识别**：*“无法根据图片版的PPT生成演讲稿”、“很多图片只是描述图片里的内容，没有分析图片之间的关系”。*
*   **表格内容丢失**：*“ppt里面如果是插入了表格，表格内的内容ai是不会去读取的。”*
*   **生成中断/失败**：*“生成到一半就告诉我服务器错误”、“只要有一页无法解析就导致所有页都不能 AI”。*

### 1.2 PRD 回溯与偏差
在 `【PRD】演示AI：PC支持AI生成演讲备注` 中，原计划“一期必保”包含**表格内容**解析，而图片识别被列为“后续或调用OCR”。
**现状偏差**：
1.  **表格解析未达标**：用户反馈明确指出表格内容未被读取，说明一期功能的落地存在 Bug 或技术覆盖度不足（如仅支持原生表格，不支持图片化表格）。
2.  **图片识别缺失**：随着用户对 AI 期望值的提升，缺乏视觉理解已成为“人机感”的主要来源。

---

## 2. 优化思路与迭代计划

### 2.1 短期迭代：体验止血与稳定性 (Quick Wins)
**目标**：解决阻断性问题，确保基础功能的可用性。

| 优先级 | 任务项 | 问题归因 | 解决方案 |
| :--- | :--- | :--- | :--- |
| **P0** | **修复 "banana" (生图模型) 调用失败** | 服务稳定性 | 针对聊天记录中提及的 **banana (生图模型)** 无法生成问题进行排查。**策略**：检查生图服务的并发限制与超时机制；若生图失败，应降级处理（如跳过生图步骤或使用默认占位图），**严禁因此阻断演讲稿的文本生成流程**。 |
| **P0** | **表格解析能力专项修复** | 功能缺陷 | 重新校验 PPT 原生表格的提取逻辑。对于无法提取的复杂表格，降级为“提取表格标题/摘要”而非完全忽略。 |
| **P1** | **图片/图表占位符优化** | 体验优化 | 当检测到页面包含图片但无法识别时，AI **不应生成**“这是一张图片”等废话。**方案**：生成提示语 *“（此处包含图片信息，建议补充具体数据以生成更精准的讲稿）”*，或引导用户手动输入关键信息。 |

### 2.2 中长期迭代：多模态融合 (Feature Dev)
**目标**：引入视觉理解能力，从根本上解决“内容太水”，对标 AnyGen 等竞品的数据分析能力。

| 阶段 | 功能模块 | 价值主张 | 实现路径 |
| :--- | :--- | :--- | :--- |
| **Phase 2** | **OCR 与 基础视觉理解** | 让 AI “看懂”文字图片 | 集成 OCR 引擎，识别截图、扫描件中的文字信息。对于**流程图、架构图**，尝试提取节点文本关系。 |
| **Phase 3** | **图表深度洞察** | 让 AI “读懂”数据趋势 | 引入多模态大模型 (Vision LLM)。识别柱状图/折线图的**趋势（上升/下降）**和**极值**，自动生成 *“如图所示，Q3季度销售额达到峰值...”* 等专业话术。 |
| **Phase 4** | **交互式演讲教练** | 人机协作 | 借鉴微软 Speaker Coach，允许用户在生成后对特定图片进行“圈选+口述补充”，AI 实时更新该页备注。 |

---

## 3. 竞品启示 (AnyGen)
参考 `【竞品分析】AnyGen全面分析`：
*   **模块化设计**：AnyGen 将内容与版式解耦，支持对局部模块的锁定与回滚。我们在优化演讲稿时，也应支持**“单页重新生成”**，而不是每次都全量重来。
*   **数据可溯源**：AnyGen 在生成数据分析结论时会标注来源。我们在生成图表解说时，也应高亮 PPT 中的对应数据区域，增强可信度。

## 4. 给研发/算法的具体的的需求建议
1.  **Input 侧**：增加 `image_context` 字段。在请求大模型时，若当前页包含图片，尝试传入图片的 OCR 结果或 Embedding 向量（视模型能力而定）。
2.  **Fallback 机制**：当 Vision Model 调用失败或超时，自动降级为 Text-only 模式，并前端 Toast 提示，避免流程中断。

