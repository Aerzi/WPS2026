# 小红书数据采集器 - 安装和使用说明

## 📦 安装步骤

### 1. 加载扩展
1. 打开Chrome浏览器
2. 在地址栏输入 `chrome://extensions/`
3. 开启右上角的"开发者模式"
4. 点击"加载已解压的扩展程序"
5. 选择本项目的文件夹

### 2. 确认安装成功
- 在浏览器扩展图标中看到小红书采集器图标
- 点击图标应该能看到插件弹出窗口

## 🎯 核心功能

### 自动模式（默认）
- 当检测到小红书搜索API请求时
- **自动循环请求所有页面**（最多10页）
- 适合快速批量采集数据

### 🎯 跟随模式（新功能）
- 开启后，插件会从拦截的notes请求中读取真实的page值
- **自动在检测到notes请求后page+1**，真正跟随用户的浏览行为
- 不会一次性请求所有页面，更加温和
- 避免请求过快，降低被检测风险

## 📖 使用方法

### 基础使用流程
1. 打开小红书网站 (www.xiaohongshu.com)
2. 在搜索框中输入关键词并搜索
3. 插件会自动拦截API请求并采集数据
4. 点击浏览器工具栏的插件图标查看采集进度
5. 点击"导出Ksheet文件"保存数据

### 跟随模式使用
1. 点击插件图标打开弹窗
2. 在"🎯 跟随模式"处打开开关
3. 在小红书页面进行搜索
4. 插件会拦截真实的notes请求，读取当前page值
5. 自动请求page+1的数据，真正跟随页面的浏览进度
6. 滚动页面加载更多内容，插件会持续跟随采集

### 手动获取数据
- 点击"手动获取数据"按钮主动触发数据采集
- 点击"获取更多数据"按钮获取下一页数据

### 导出数据
- 点击"导出Ksheet文件"导出为Excel格式
- 如果Ksheet导出失败，会自动降级为CSV格式

### 清空数据
- 点击"清空所有数据"清除已采集的数据
- 此操作不可恢复，请谨慎使用

## ⚙️ 模式对比

| 特性 | 自动模式（关闭跟随模式） | 跟随模式（开启） |
|-----|---------------------|----------------|
| 触发方式 | 检测到notes请求后自动获取所有页 | 拦截真实请求，读取page后自动请求page+1 |
| Page管理 | 插件自己维护page计数 | 从拦截的请求中读取真实page值 |
| 请求速度 | 快速（2秒间隔连续请求） | 跟随真实浏览速度（2秒延迟） |
| 数据量 | 一次性获取多页（最多10页） | 真正逐页跟随 |
| 适用场景 | 快速批量采集 | 跟随用户浏览、避免触发限制 |

## 🔍 工作原理

- **自动模式**：检测到notes请求 → 立即循环请求第1-10页 → 一次性采集完成
- **跟随模式**：拦截notes请求 → 解析请求体获取真实page值 → 自动请求page+1 → 持续跟随页面浏览

### 跟随模式详细流程
1. 用户在小红书搜索并浏览（比如第4页）
2. 插件拦截到page=4的notes请求
3. 插件解析请求体，得知当前是第4页
4. 插件自动发起page=5的请求
5. 继续采集更多数据

## 🔍 调试和查看日志

1. 在小红书页面按F12打开开发者工具
2. 切换到"Console"标签
3. 可以看到详细的采集日志：
   - 🌐 网络请求日志
   - 📊 数据采集进度
   - 📄 当前拦截的页码
   - 🎯 当前模式状态
   - ✅ 成功/失败信息

## 💡 使用提示

1. **首次使用**：建议先关闭跟随模式，测试快速采集功能
2. **大量采集**：如果需要采集大量数据，建议开启跟随模式，避免请求过快
3. **数据去重**：插件会自动去除重复的帖子（基于帖子ID）
4. **刷新页面**：如果插件无响应，尝试刷新小红书页面
5. **查看进度**：插件会实时更新已采集的帖子数量

## 📊 导出的数据字段

- 帖子ID
- 帖子标题
- 作者昵称
- 喜欢数
- 收藏数
- 评论数
- 分享数
- 帖子链接
- 数据类型
- 采集时间

## ⚠️ 注意事项

1. 仅供学习和研究使用
2. 请遵守小红书的使用条款和robots协议
3. 不要过度频繁请求，避免对服务器造成压力
4. 采集的数据仅供个人使用，请勿用于商业用途
5. 使用跟随模式可以降低被检测的风险

## 🐛 常见问题

### Q: 插件无法采集数据？
A: 
- 确认在小红书搜索页面（有搜索结果的页面）
- 按F12查看Console是否有错误信息
- 尝试点击"手动获取数据"按钮
- 刷新页面后重试

### Q: 跟随模式不工作？
A: 
- 确认已打开跟随模式开关
- 在小红书页面滚动加载更多内容
- 查看Console日志确认模式状态

### Q: 导出文件在哪里？
A: 
- 文件会自动下载到浏览器的默认下载文件夹
- 文件名格式：`小红书帖子数据_YYYY-MM-DD.csv`

### Q: 能采集多少页数据？
A: 
- 自动模式：最多10页（每页20条）
- 跟随模式：无限制，跟随用户浏览
- 可以多次点击"获取更多数据"继续采集

## 🔄 更新日志

### v2.1 (最新)
- 🎯 修复跟随模式逻辑：从拦截的请求体中读取真实page值
- ✨ 真正实现跟随用户浏览行为，自动page+1
- 📊 优化日志输出，显示当前拦截的页码

### v2.0
- ✨ 新增跟随模式功能
- 🎯 支持根据notes请求自动page+1
- 💾 跟随模式状态持久化保存
- 🎨 优化UI界面，添加模式切换开关

### v1.0
- 🚀 基础数据采集功能
- 📥 Ksheet/CSV导出功能
- 🔍 自动拦截API请求
- 📊 数据预览功能
